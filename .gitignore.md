# .gitignore Documentation

This document explains the comprehensive `.gitignore` file for the LightLLM Rust proxy project.

## Overview

The `.gitignore` file is organized into logical sections to ensure that:
- Build artifacts and temporary files are not tracked
- Sensitive information (API keys, tokens) is protected
- IDE and editor files are excluded
- OS-specific files are ignored
- Project-specific artifacts are not committed

## Sections Explained

### 1. Rust Build Artifacts
```
/target/
**/*.rs.bk
*.pdb
```
- **`/target/`**: The main Rust build directory containing all compiled artifacts
- **`**/*.rs.bk`**: Backup files created by rustfmt
- **`*.pdb`**: Program database files (Windows debugging symbols)

### 2. IDE and Editor Files
```
.vscode/
.idea/
*.swp
*.swo
*~
.DS_Store
```
- **IDE configurations**: VS Code, IntelliJ, Vim, Emacs, Sublime Text
- **OS files**: macOS `.DS_Store`, Windows `Thumbs.db`
- **Temporary files**: Swap files, backup files

### 3. Environment Variables and Secrets
```
.env
*.env
secrets.toml
api_keys.txt
tokens.txt
```
- **Environment files**: `.env` files containing sensitive configuration
- **Secret files**: API keys, tokens, passwords
- **Configuration overrides**: Local development settings

### 4. Node.js Dependencies (for examples)
```
node_modules/
npm-debug.log*
package-lock.json
```
- **Dependencies**: Node.js packages in examples directory
- **Lock files**: Package manager lock files
- **Debug logs**: NPM/Yarn error logs

### 5. Test Artifacts and Coverage
```
coverage/
*.lcov
tarpaulin-report.html
/target/coverage/
```
- **Coverage reports**: Code coverage analysis results
- **Test artifacts**: Temporary test files and outputs

### 6. Benchmark and Performance Data
```
benchmark-results/
*.bench
/target/criterion/
perf.data*
```
- **Benchmark results**: Performance test outputs
- **Profiling data**: CPU and memory profiling results
- **Criterion outputs**: Rust benchmarking framework results

### 7. Docker and Containerization
```
Dockerfile.local
docker-compose.override.yml
.dockerignore
```
- **Local Docker files**: Development-specific container files
- **Override files**: Local Docker Compose configurations

### 8. Database and Cache Files
```
*.db
*.sqlite
dump.rdb
*.rdb
```
- **Database files**: SQLite, Redis dump files
- **Cache files**: Application cache data

### 9. SSL/TLS Certificates
```
*.pem
*.key
*.crt
*.cert
```
- **Certificate files**: SSL/TLS certificates and private keys
- **Security files**: Authentication credentials

### 10. Project-Specific Patterns
```
# LightLLM Specific
lightllm-cache/
model-cache/
*.model
*.bin

# Streaming Test Output
streaming-output/
sse-logs/
stream-logs/

# Performance Test Artifacts
perf-logs/
benchmark-logs/
latency-reports/

# Rate Limiting State
rate-limit-state/
token-buckets/
redis-dumps/
```
- **LightLLM specific**: Model files, cache directories
- **Streaming artifacts**: Server-Sent Events logs and outputs
- **Performance data**: Latency reports, benchmark results
- **State files**: Rate limiting, connection pooling state

## Best Practices

### 1. Security
- **Never commit**: API keys, tokens, passwords, certificates
- **Always ignore**: Environment files, secret configurations
- **Use**: Environment variables or external secret management

### 2. Performance
- **Ignore build artifacts**: They can be regenerated and are large
- **Ignore logs**: They grow quickly and contain sensitive data
- **Ignore cache files**: They're local and can be regenerated

### 3. Collaboration
- **Ignore IDE files**: Different developers use different tools
- **Ignore OS files**: Platform-specific files shouldn't be shared
- **Ignore temporary files**: They're ephemeral and local

### 4. CI/CD
- **Ignore deployment files**: Keep deployment configs separate
- **Ignore monitoring data**: Metrics and logs should be external
- **Ignore backup files**: They can be regenerated

## Common Commands

### Check what's being ignored:
```bash
git status --ignored
```

### Force add an ignored file (use with caution):
```bash
git add -f filename
```

### Remove a file from tracking but keep it locally:
```bash
git rm --cached filename
```

### Update .gitignore for already tracked files:
```bash
git rm -r --cached .
git add .
```

## Maintenance

### Regular Tasks:
1. **Review ignored files**: Ensure no sensitive data is tracked
2. **Update patterns**: Add new file types as project evolves
3. **Clean up**: Remove obsolete patterns
4. **Test**: Verify new patterns work as expected

### When Adding New Dependencies:
1. **Check build output**: What new files are generated?
2. **Update .gitignore**: Add patterns for new artifacts
3. **Test locally**: Ensure files are properly ignored
4. **Document**: Update this file if needed

## Troubleshooting

### Files still being tracked:
1. Check if file was added before .gitignore rule
2. Use `git rm --cached` to remove from tracking
3. Verify .gitignore syntax is correct

### Files being ignored when they shouldn't be:
1. Check .gitignore patterns for conflicts
2. Use `git add -f` to force add specific files
3. Consider more specific patterns

### Performance issues:
1. Large ignored directories can slow git operations
2. Consider using sparse-checkout for large projects
3. Use .git/info/exclude for local-only ignores

## Related Files

- **`.gitattributes`**: File attributes and line ending handling
- **`Cargo.toml`**: Rust project configuration
- **`README.md`**: Project documentation
- **`USAGE.md`**: Usage instructions

## Security Notes

⚠️ **Important**: This .gitignore helps protect sensitive information, but it's not foolproof. Always:

1. **Review before committing**: Use `git status` to check what's being added
2. **Use pre-commit hooks**: Automatically check for sensitive data
3. **Rotate secrets**: If sensitive data is accidentally committed, rotate the secrets
4. **Use external secret management**: For production deployments

## Project-Specific Notes

This LightLLM Rust proxy project includes:
- **Streaming functionality**: SSE logs and state files
- **Performance testing**: Benchmark and profiling data
- **Multiple adapters**: LightLLM and OpenAI backend support
- **Rate limiting**: Token bucket state and Redis dumps
- **Connection pooling**: Pool state and connection logs
- **Caching**: Cache dumps and state files
- **Comprehensive testing**: Unit, integration, stress, and performance tests

All these components generate artifacts that should not be committed to version control.
